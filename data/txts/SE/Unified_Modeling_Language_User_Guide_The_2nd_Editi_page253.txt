 If you want a transition to activate the last substate, you show a transition from outside the composite state directly to the history state. The first time you enter a composite state, it has no history. This is the meaning of the single transition from the history state to a sequential substate such as Collecting. The target of this transition specifies the initial state of the nested state machine the first time it is entered. Continuing, suppose that while in the BackingUp state and the Copying state, the query event is posted. Control leaves Copying and BackingUp (dispatching their exit actions as necessary) and returns to the Command state. When the action of Command completes, the triggerless transition returns to the history state of the composite state BackingUp. This time, because there is a history to the nested state machine, control passes back to the Copying state#thus bypassing the Collecting state#because Copying was the last substate active prior to the transition from BackingUp. Note the symbol H designates a shallow history, which remembers only the history of the immediate nested state machine. You can also specify deep history, shown as a small circle containing the symbol H*. Deep history remembers down to the innermost nested state at any depth. If you have only one level of nesting, shallow and deep history states are semantically equivalent. If you have more than one level of nesting, shallow history remembers only the outermost nested state; deep history remembers the innermost nested state at any depth.  In either case, if a nested state machine reaches a final state, it loses its stored history and behaves as if it had not yet been entered for the first time. Active objects are discussed in Chapter 22. Concurrent Substates   